[gd_scene load_steps=43 format=3 uid="uid://dadalw62vr8ce"]

[ext_resource type="Texture2D" uid="uid://dm0cefhg5de1x" path="res://Player/char_a_p4_0bas_humn_v00.png" id="2_hqtel"]
[ext_resource type="Script" uid="uid://covcks67j0uei" path="res://script/camera_2d.gd" id="3_h0d7r"]
[ext_resource type="Texture2D" uid="uid://6d2kpcrci1hq" path="res://Player/char_a_p1_0bas_humn_v00.png" id="3_sweqy"]
[ext_resource type="Script" uid="uid://budj0nt1vydr4" path="res://script/inventory.gd" id="4_vgqql"]
[ext_resource type="Script" uid="uid://bluyopjauhv0r" path="res://script/inventory_ui.gd" id="5_fkybt"]

[sub_resource type="GDScript" id="GDScript_onrkg"]
script/source = "extends CharacterBody2D

const speed = 120
var current_dir = \"none\"

func _ready():
	var skin_index = GameData.selected_skin_index
	var skin_path = GameData.skin_paths[skin_index]
	var frames = load(skin_path)
	$AnimatedSprite2D.frames = frames
	$AnimatedSprite2D.play(\"front_idle\")

func _physics_process(delta):
	player_movement(delta)

func player_movement(delta):
	
	if Input.is_action_pressed(\"ui_right\"):
		current_dir = \"right\"
		play_anim(1)
		velocity.x = speed
		velocity.y = 0
	
	elif Input.is_action_pressed(\"ui_left\"):
		current_dir = \"left\"
		play_anim(1)
		velocity.x = -speed
		velocity.y = 0
	
	elif Input.is_action_pressed(\"ui_down\"):
		current_dir = \"down\"
		play_anim(1)
		velocity.y = speed
		velocity.x = 0
	
	elif Input.is_action_pressed(\"ui_up\"):
		current_dir = \"up\"
		play_anim(1)
		velocity.y = -speed
		velocity.x = 0
	else:
		play_anim(0)
		velocity.x = 0
		velocity.y = 0
	
	move_and_slide()
	

func play_anim(movement):
	var dir = current_dir
	var anim = $AnimatedSprite2D
	
	if dir == \"right\":
		anim.flip_h = false
		if movement == 1:
			anim.play(\"right_walk\")
		elif movement == 0:
			anim.play(\"right_idle\")
	if dir == \"left\":
		anim.flip_h = false
		if movement == 1:
			anim.play(\"left_walk\")
		elif movement == 0:
			anim.play(\"left_idle\")
			
	
	if dir == \"up\":
		anim.flip_h = true
		if movement == 1:
			anim.play(\"back_walk\")
		elif movement == 0:
			anim.play(\"back_idle\")
	if dir == \"down\":
		anim.flip_h = true
		if movement == 1:
			anim.play(\"front_walk\")
		elif movement == 0:
			anim.play(\"front_idle\")
	
"

[sub_resource type="AtlasTexture" id="AtlasTexture_syoou"]
atlas = ExtResource("2_hqtel")
region = Rect2(64, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_f6nf7"]
atlas = ExtResource("2_hqtel")
region = Rect2(128, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ga1dr"]
atlas = ExtResource("3_sweqy")
region = Rect2(0, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_28328"]
atlas = ExtResource("3_sweqy")
region = Rect2(64, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ww8dr"]
atlas = ExtResource("3_sweqy")
region = Rect2(128, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vap8u"]
atlas = ExtResource("3_sweqy")
region = Rect2(192, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ix6s6"]
atlas = ExtResource("3_sweqy")
region = Rect2(256, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rjh2y"]
atlas = ExtResource("3_sweqy")
region = Rect2(320, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_e4v6s"]
atlas = ExtResource("2_hqtel")
region = Rect2(64, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_upndt"]
atlas = ExtResource("2_hqtel")
region = Rect2(128, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0fr1s"]
atlas = ExtResource("3_sweqy")
region = Rect2(0, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ymlad"]
atlas = ExtResource("3_sweqy")
region = Rect2(64, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_br8re"]
atlas = ExtResource("3_sweqy")
region = Rect2(128, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hr8ca"]
atlas = ExtResource("3_sweqy")
region = Rect2(192, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_grb2e"]
atlas = ExtResource("3_sweqy")
region = Rect2(256, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kmib8"]
atlas = ExtResource("3_sweqy")
region = Rect2(320, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_8m00p"]
atlas = ExtResource("2_hqtel")
region = Rect2(64, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_heyrv"]
atlas = ExtResource("2_hqtel")
region = Rect2(128, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_dobvc"]
atlas = ExtResource("3_sweqy")
region = Rect2(0, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wbyns"]
atlas = ExtResource("3_sweqy")
region = Rect2(64, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kkard"]
atlas = ExtResource("3_sweqy")
region = Rect2(128, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_w22aw"]
atlas = ExtResource("3_sweqy")
region = Rect2(192, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_p0rxl"]
atlas = ExtResource("3_sweqy")
region = Rect2(256, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ruag8"]
atlas = ExtResource("3_sweqy")
region = Rect2(320, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_yt8w6"]
atlas = ExtResource("2_hqtel")
region = Rect2(64, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_nulgc"]
atlas = ExtResource("2_hqtel")
region = Rect2(128, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_pyhao"]
atlas = ExtResource("3_sweqy")
region = Rect2(0, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0rnmb"]
atlas = ExtResource("3_sweqy")
region = Rect2(64, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_m8dw5"]
atlas = ExtResource("3_sweqy")
region = Rect2(128, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ob4gc"]
atlas = ExtResource("3_sweqy")
region = Rect2(192, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_e3a1d"]
atlas = ExtResource("3_sweqy")
region = Rect2(256, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kod07"]
atlas = ExtResource("3_sweqy")
region = Rect2(320, 384, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_f6nf7"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_syoou")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f6nf7")
}],
"loop": true,
"name": &"back_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ga1dr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_28328")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ww8dr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vap8u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ix6s6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rjh2y")
}],
"loop": true,
"name": &"back_walk",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_e4v6s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_upndt")
}],
"loop": true,
"name": &"front_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0fr1s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ymlad")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_br8re")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hr8ca")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_grb2e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kmib8")
}],
"loop": true,
"name": &"front_walk",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_8m00p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_heyrv")
}],
"loop": true,
"name": &"left_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dobvc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wbyns")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kkard")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w22aw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p0rxl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ruag8")
}],
"loop": true,
"name": &"left_walk",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yt8w6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nulgc")
}],
"loop": true,
"name": &"right_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pyhao")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0rnmb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m8dw5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ob4gc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e3a1d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kod07")
}],
"loop": true,
"name": &"right_walk",
"speed": 7.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i3pqv"]
size = Vector2(13, 29)

[sub_resource type="CircleShape2D" id="CircleShape2D_h0d7r"]
radius = 22.0907

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fkybt"]
size = Vector2(15, 40)

[node name="player" type="CharacterBody2D"]
y_sort_enabled = true
collision_layer = 3
up_direction = Vector2(0, 1)
script = SubResource("GDScript_onrkg")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
z_index = -1
position = Vector2(6.77626e-21, 0)
scale = Vector2(1.39063, 1.32813)
sprite_frames = SubResource("SpriteFrames_f6nf7")
animation = &"right_walk"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -1.5)
shape = SubResource("RectangleShape2D_i3pqv")

[node name="Camera2D" type="Camera2D" parent="."]
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_vertical_offset = 0.09
drag_left_margin = 0.21
drag_top_margin = 0.16
drag_right_margin = 0.19
drag_bottom_margin = 0.13
editor_draw_screen = false
editor_draw_limits = true
editor_draw_drag_margin = true
script = ExtResource("3_h0d7r")

[node name="player_hitbox" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="player_hitbox"]
position = Vector2(-1, -2)
shape = SubResource("CircleShape2D_h0d7r")

[node name="Inventory" type="Area2D" parent="."]
script = ExtResource("4_vgqql")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Inventory"]
light_mask = 0
visibility_layer = 8
position = Vector2(5.5, -3)
shape = SubResource("RectangleShape2D_fkybt")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="InventoryUI" type="PanelContainer" parent="CanvasLayer"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -57.0
offset_top = -50.0
offset_right = 57.0
grow_horizontal = 2
grow_vertical = 0
script = ExtResource("5_fkybt")

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/InventoryUI"]
layout_mode = 2
size_flags_vertical = 8

[connection signal="area_entered" from="Inventory" to="Inventory" method="_on_area_entered"]
[connection signal="item_added" from="Inventory" to="CanvasLayer/InventoryUI" method="_on_inventory_item_added"]
